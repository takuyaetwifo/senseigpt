

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<h2 style="display: flex;align-items: center; gap: 20px;">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
      {% if user_icon %}
    <img src="{{ url_for('static', filename='uploads/' ~ user_icon) }}" alt="ã‚¢ã‚¤ã‚³ãƒ³" width="100" height="100" style="vertical-align: middle; border-radius: 50%;">
      {% endif %}
  ã›ã‚“ã›ã„GPT
  <!--  <p>ã“ã‚“ã«ã¡ã¯ã€{{ username }}ã•ã‚“ï¼</p>-->
  {% if lesson %}
    <span style="font-size: 16px; background-color: #eef; padding: 6px 10px; border-radius: 8px;">
      ğŸ“˜ ãã‚‡ã†ã®ãŠã¹ã‚“ãã‚‡ã†ï¼š{{ lesson }}
    </span>
  {% endif %}
</h2>
<!--
  <title>ã›ã‚“ã›ã„GPT</title>
-->

  </head>
<body>
  <body style="background-color: {{ theme_color }};">
  <div class="header">
    ãƒ­ã‚°ã‚¤ãƒ³ä¸­: {{ username }} ã•ã‚“ |
    <a href="{{ url_for('settings') }}">è¨­å®š</a>
    <a href="/logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
  </div>



  <form method="POST" action="/chat">
    <input type="text" name="message" required>
    <button type="submit">é€ä¿¡</button>
  </form>


<form action="{{ url_for('clear_chat') }}" method="POST" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
  <button type="submit">å±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤</button>
</form>


<div class="chat-log">
{% if rows %}
  <ul>
    {% for row in rows %}
      <div class="message user"><strong>ã‚ãªãŸ:</strong> {{ row.user_input }}</div><br>
          <div class="message gpt"><strong>å…ˆç”Ÿ:</strong> {{ row.gpt_response }}</div>
    {% endfor %}
  </ul>
{% endif %}
</div>
<!--
<div class="chat-log">
  {% for i in range(messages|length // 2) %}
    {% set user_msg = messages[-2 * (i + 1)] %}
    {% set assistant_msg = messages[-2 * (i + 1) + 1] %}

    <div class="message user"><strong>ã‚ãªãŸ:</strong><br>{{ user_msg.content }}</div>
    <div class="message gpt"><strong>å…ˆç”Ÿ:</strong><br>{{ assistant_msg.content }}</div>
  {% endfor %}
</div>

-->

</body>
</html>
